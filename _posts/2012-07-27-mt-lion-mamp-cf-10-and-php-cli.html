---
layout: post
title: "Mt Lion, MAMP, CF 10, and the PHP CLI"
date: 2012-07-27
comments: false
categories:
 - coldfusion
 - mysql
 - php
 - mac
 - mamp
 - apache
---

<div class='post'>
Today I decided to do a fresh install of Mountain Lion. &nbsp;In order to get back to the development environment I had for php and ColdFusion I decided to try follow what sounded like the "easiest path" - thus, instead of using MacPorts to install all the apache/php stuff I decided to use MAMP. &nbsp;Also, instead of using Railo (whose installation could be more straight forward) I decided to install the dev version of ColdFusion 10. <br /><br />MAMP installation is simple. &nbsp;I just rolled with the default settings and let it do it's thing with one small exception. &nbsp;When it was at installation options I found a way to expand them and turn off MAMP pro. I didn't really want to pay for the added features it might offer.<br /><br />Next up I installed ColdFusion 10. &nbsp;Again, this was pretty straight forward. &nbsp;I installed things using the default settings until I got to the point where I had to add a webserver connector. &nbsp;After clicking "add" the form had prepopulated with the default base Apache install instead of the MAMP install. &nbsp;I changed the conf path to "/Applications/MAMP/conf/apache" &nbsp;Likewise I changed the httpd path to "/Applications/MAMP/bin/apahce2/bin/httpd" and the apachectl path to "/Applications/MAMP/bin/apache2/bin/apachectl" &nbsp;After that I just let it do it's thing and before I knew it CF 10 was installed and working propertly on my MAMP stack.<br /><br />I write a lot of unit tests in PHP so I need to make sure the Command Line Interface points at the same php install. &nbsp;This wasn't too tricky but it took me a few minutes to figure out. &nbsp;First I had to update my .bash_profile to include<br /><br /><pre class="xml" name="code">PATH=/Applications/MAMP/bin/hp/php5.4.4/bin:$PATH<br />export PATH<br /></pre><br />Then I restarted terminal (or you can just type  . ./.bash_profile to reload your path info).  To test it I typed php -v and made sure 5.4.4 showed up instead of 5.3.x or whatever the default version in Mt. Lion is.  <br /><br />At this point I can access my CF administrator via http://127.0.0.1/cfide/administrator, I can access the MAMP root at http://localhost/MAMP &nbsp;and I setup a virtual_host (or an alias if that is your bag) so I could access my development files without having to go into the MAMP htdocs root directory. Here is my httpd-vhosts.conf file:<br /><br /><br /><pre class="xml" name="code">#<br /># Virtual Hosts<br />#<br /># If you want to maintain multiple domains/hostnames on your<br /># machine you can setup VirtualHost containers for them. Most configurations<br /># use only name-based virtual hosts so the server doesn't need to worry about<br /># IP addresses. This is indicated by the asterisks in the directives below.<br />#<br /># Please see the documentation at <br /># <url:http: 2.2="" docs="" httpd.apache.org="" vhosts=""><br /># for further details before you try to setup virtual hosts.<br />#<br /># You may use the command line option '-S' to verify your virtual host<br /># configuration.<br /><br />#<br /># Use name-based virtual hosting.<br />#<br />NameVirtualHost *:80<br /><br /><br /><br /><virtualhost *:80=""><br />    DocumentRoot "/Users/bill/dev/websites"<br />    ServerName localhost<br />    ServerAlias *.localhost<br />    <directory "="" bill="" dev="" users="" websites"=""><br />        Options ExecCGI FollowSymLinks<br />        AllowOverride all<br />        Allow from all<br />        Order allow,deny<br />    </directory><br /></virtualhost><br /><br /><br /><virtualhost *:80=""><br />    DocumentRoot "/Users/bill/dev/cfsites"<br />    ServerName cfserver.com<br />    ServerAlias *.cfserver.com<br />    Alias /mxunit /Users/bill/dev/cf-libraries/mxunit<br />    <directory bill="" cf-libraries="" dev="" mxunit="" users=""><br />        Allow from all<br />        Order allow,deny<br />    </directory><br /></virtualhost><br /><br />I also had to update my hosts file so that cfserver.com exists.  The hosts file is at /private/etc/hosts</url:http:></pre></div>
