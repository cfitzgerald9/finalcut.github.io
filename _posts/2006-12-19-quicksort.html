---
layout: post
title: "QuickSort"
date: 2006-12-19
comments: false
categories:
 - quicksort
 - algorithms
 - sorting
---

<div class='post'>
I was reading an <a href="http://yagni.com/combsort/">article on sorting algorithms</a> today and thought, "Hrm, I wonder how well CF compares to these others when running a hand written QuickSort."<br /><br />The answer, not very good - however, the good news is that it isn't really important considering the built in array sorting method is VERY fast, even for large datasets (10,000 elements).<br /><br />I gave up waiting on CF to finish the QuickSort for 10,000 elements but for just 1,000 it took over 4 seconds on average - with the built in sort the time was not-measurable.<br /><br />Here is the QuickSort Algorithim I used:<br /><br /><pre name="code" class="coldfusion"><br />&lt;cffunction name="partition" returntype="struct"&gt;<br /> &lt;cfargument name="a" type="array" /&gt;<br /> &lt;cfargument name="first" type="numeric" /&gt;<br /> &lt;cfargument name="last" type="numeric" /&gt;<br /><br /> &lt;cfset var pivot = arguments.a[arguments.first] /&gt;<br /> &lt;cfset var lastS1 = arguments.first /&gt;<br /> &lt;cfset var firstUnknown = arguments.first+1 /&gt;<br /> &lt;cfset var s = structNew() /&gt;<br /><br /> &lt;cfloop condition="firstUnknown LTE arguments.last"&gt;<br />  &lt;cfif a[firstUnknown] LT pivot&gt;<br />   &lt;cfset lastS1 = lastS1 + 1 /&gt;<br />   &lt;cfset arraySwap(arguments.a,firstUnknown,lastS1) /&gt;<br />  &lt;/cfif&gt;<br />  &lt;cfset firstUnknown = firstUnknown + 1 /&gt;<br /> &lt;/cfloop&gt;<br /><br /> &lt;cfset arraySwap(arguments.a,arguments.first,lastS1) /&gt;<br /><br /> &lt;cfset s.s1 = lastS1 /&gt;<br /> &lt;cfset s.a = arguments.a /&gt;<br /> &lt;cfreturn s /&gt;<br /> <br />&lt;/cffunction&gt;<br /><br />&lt;cffunction name="quicksorter" returntype="array"&gt;<br /> &lt;cfargument name="a" type="array"&gt;<br /> &lt;cfargument name="first" type="numeric"&gt;<br /> &lt;cfargument name="last" type="numeric"&gt;<br /><br /> &lt;cfset var pivotInfo = StructNew() /&gt;<br /><br /> &lt;cfif arguments.first LT arguments.last&gt;<br />  <br />  &lt;cfset pivotInfo = partition(a,arguments.first,arguments.last) /&gt;<br />  &lt;cfset arguments.a = pivotInfo.a /&gt;<br />  &lt;cfset arguments.a = quicksorter(arguments.a,arguments.first,pivotInfo.s1-1) /&gt;<br />  &lt;cfset arguments.a = quicksorter(arguments.a,pivotInfo.s1+1,arguments.last) /&gt;<br /> &lt;/cfif&gt;<br /><br /> &lt;cfreturn a /&gt;<br />&lt;/cffunction&gt;<br /><br />&lt;cffunction name="quicksort" returntype="array"&gt;<br /> &lt;cfargument name="a" type="array" /&gt;<br /> &lt;cfargument name="size" type="numeric" /&gt;<br /><br /> &lt;cfreturn quicksorter(arguments.a,1,arguments.size) /&gt;<br />&lt;/cffunction&gt;<br /></pre><br /><br />You can call it like so.  This can be used to sort smaller portions of the array if you want.<br /><pre name="code" class="coldfusion"><br />&lt;cfset l1 = quicksort(l1,arrayLen(l1)) /&gt;<br /></pre><br /><br />The linked article has a couple of other sorting algorithms you can look at and has them implemented in many languages (just not CF).  CF, however, is best not included in the conversation with languages like C++ which completes the quicksort on 10,000 elements in 0.0038 seconds.</div>
