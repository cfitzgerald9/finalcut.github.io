---
layout: post
title: "Private Method Injection"
date: 2005-09-15
comments: false
categories:
 - coldfusion
 - ioc
 - dependency-injection
---

<div class='post'>
I have to honestly say I haven't had a reason to use Method Injection with CF but yesterday I ran into a post at <a href="http://www.compoundtheory.com/?action=displayPost&ID=61">Compound Theory</a> that talked about the subject and provided some tips.  During the article he mentioned injecting a method into a components variables scope and then said he would leave that as an exercise for the reader.<br /><br />Before you go on, if you aren't really familiar with what method injection is I suggest you read the article at <a href="http://www.compoundtheory.com/?action=displayPost&ID=61">Compound Theory</a>.  He does a fine job of explaining it.<br /><br />So I quickly jotted down my thought on how to do it last night and was able to test it this morning.  Suprisingly, it worked.  I have two methods of doing it - but they really both boil down to the same thing.<br /><ol><br /><li>Start with a public method in the CFC that already does the ditry work of moving the method into the private variables scope</li><br /><li>Inject said public method into the CFC first</li><br /></ol><br /><br />Here is the method that will help you inject into the private variables scope:<br /><br /><pre name="code" class="coldfusion"><br /> &lt;cffunction name="addmethod" access="public" hint="I inject methods into the private variables scope"&gt;<br />  &lt;cfargument name="newmethod" type="any"&gt;<br />  &lt;cfargument name="methodname" type="string"&gt;<br /><br />  &lt;cfset variables["#arguments.methodname#"] = arguments.newMethod /&gt;<br /><br /> &lt;/cffunction&gt;<br /></pre><br /><br />Pretty straight forward really.  It is as easy to use as it appears:<br /><pre name="code" class="coldfusion"><br />&lt;cfset myComponent.addMethod(someFunction,"someFunctionName") /&gt;<br /></pre><br /><br />Where someFunction is actually a defined UDF and someFunctionName is how you want it referenced in the variables scope.<br /><br />Can you think of any other ways to inject a method into the private scope?  And finally, why would you want to?<br /><br />UPDATE:<br />For anyone that wants to know more about IoC or Dependency Injection, which is what this whole excerise is about really, Dave Ross left the following link in a comment:<br /><a href="http://static.springframework.org/spring/docs/1.2.x/reference/beans.html#d0">Dependency Injection Pattern</a></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
well.. I just came back to this tonight (not sure why - I'm a blog zombie). Wish Blogger did notifications.<BR/><BR/>Anyways, Mark, the reason for wanting the lookup-method injection to be private is that it's only meant to be called by the object it's injected into. When you give a girl your number you don't want her ugly friend calling, right? ;)<BR/><BR/>Bill,<BR/><BR/>Glad you took a look at the concepts behind IoC/DI. I truly believe that they help with CFC development, especially for larger codebases. I find ColdSpring very unobtrusive to work with... you don't really know it's there, but after you wire together 2 fully configured objects with a mere inclusion of a setter method, you definitely appreciate its abilities.<BR/><BR/>-dave ross</div>
</div>
<div class='comment'>
<div class='author'>Mark Mandel</div>
<div class='content'>
Why would you want to inject private methods?<BR/><BR/>Hmnn... depends what you are doing - <BR/><BR/>Maybe as a helper method for another public method you don't want to be exposed is one that immediatley comes to mind.<BR/><BR/>Or if an extending object is expecting that the method will be there - and you don't want it exposed as public... but that's getting into some pretty convoluted circumstances.<BR/><BR/>So you could say it doesn't pop up too often, but it can do.<BR/><BR/>Glad to be interesting ;o)<BR/><BR/>In reposnse to DavidR:<BR/>This sort of approach can be used to as a 'lightweight' form of inheritence. Look up Robin Hilliard's usage of mixins.<BR/>(http://www.rocketboots.com/blog/index.cfm?mode=entry&entry=6E1A91AC-E081-51EF-A796B568EF7FABEA)</div>
</div>
<div class='comment'>
<div class='author'>Bill</div>
<div class='content'>
Dave (Ross), thanks for the Link.  I had to reread a couple parts (note to self, don't try to learn this stuff when sleepy).<BR/><BR/>It makes sense.  I didn't really get the part about the Interface Injection.  But the constructor and getter injection both made sense.<BR/><BR/>And better yet - the point of them - made sense.  I'm not sure I have a current need for this knowledge but it is good to have nonetheless.<BR/><BR/>Thanks Guys.</div>
</div>
<div class='comment'>
<div class='author'>Bill</div>
<div class='content'>
Mark, glad to link to an interesting post.<BR/><BR/>Just curious though, why do you need to do private method injection? I'm sure there is a value to it that is just eluding me.<BR/><BR/>Thanks</div>
</div>
<div class='comment'>
<div class='author'>Mark Mandel</div>
<div class='content'>
Thanks for linking me!<BR/><BR/>I just noticed my site was blocking yours with my referrer spam blocker.<BR/><BR/>I made sure that wasn't going to be an  issue for you now.<BR/><BR/>As per techniques - I think you've hit the 2 on the head, but I actually have a CFC that does it all for me.  I find it easier that way.</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
I'd like to implement the lookup-method bean attribute in ColdSpring, which should be injected as a private method, however there's not *too* much harm in leaving it public. For background on what lookup-method does, see: http://static.springframework.org/spring/docs/1.2.x/reference/beans.html#d0e1161<BR/><BR/>-Dave Ross</div>
</div>
<div class='comment'>
<div class='author'>David Ringley</div>
<div class='content'>
I could see using something like this if I wanted to get at the CFC's instance variables in the variables.instance structure but was too lazy to write a getMemento() function for each.  I could just inject a getMemento() function into the CFC and call it to retrieve the memento to be used in some type of TransferObject before passing it to a DataAccessObject to persist.  Though, I am not sure that I would actually do this since this seems rather invasive.</div>
</div>
</div>
