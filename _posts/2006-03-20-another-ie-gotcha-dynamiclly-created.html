---
layout: post
title: "Another IE Gotcha - Dynamically Created Radio Buttons"
date: 2006-03-20
comments: false
categories:
 - javascript
 - ie
 - dom
 - ajax
---

<div class='post'>
As soon as I think I have it all worked out I bump into another oddity between Firefox and IE and handling the DOM.  Specifically adding a radio button (or set of them) dynamically.<br /><br />My initial javascript went something like this:<br /><br /><pre name="code" class="jscript"><br />var rdo = document.createElement('input');<br />rdo.type = 'radio';<br />rdo.id = 'someUniqueID';<br />rdo.name = 'myRadio';<br />rdo.value = 1;<br /><br />myDocumentsBody.appendChild(rdo);<br /><br /></pre><br /><br />This almost worked perfectly. The input was added, it was a radio button, but it was totally unselectable.  I could select it via javascript but the normal "click" event didn't cause the radio button to assume the "selected" state in IE?  What gives?<br /><br />Well, I don't know what gives but it turns out I can't assign the type independently of creating a radio control.  Instead, I have to create my radio object like so:<br /><br /><pre name="code" class="jscript"><br />var rdo = document.createElement("&lt;input type=\"radio\" name=\"fldID\" &gt;");<br /></pre><br /><br />By specifying the type during the creation process the radio button was then selectable in the normal manner. <strike>This method works inboth IE and FF.</strike><br /><br />Update: 9 May 2006<br />Well, as has been reported by many people I was crazy when I said this technique worked in both IE and Firefox.  What was I thinking?   It doesn't work in Firefox at all.  However, there is a fairly easy solution that will insert a selectable radio button in both IE and Firefox - however, I'm sorry to say, it doesn't work in Opera.  Damn these browsers; well, really, damn IE for not working properly - and damn Opera for not throwing an error when we use IE's crazy syntax.<br /><br />So here is the javascript that is needed to create a radio button that will work in IE and Firefox:<br /><br /><pre name="code" class="coldfusion"><br />   try{<br />    rdo = document.createElement('&lt;input type="radio" name="fldID" /&gt;');<br />   }catch(err){<br />    rdo = document.createElement('input');<br />    rdo.setAttribute('type','radio');<br />    rdo.setAttribute('name','fldID');<br />   }<br /></pre><br /><br />Here is a <a href="http://rawlinson.us/blog/documents/jsradio.html">demo page</a> - just view the page source to see what I am doing and how it works.  If anyone has a good solution that will work in all three browsers please let me know.<br /><br />Final Update (18 July 2008) - the <a href="http://rawlinson.us/blog/documents/jsradio.html">demo page</a> is also updated to reflect this change.<br /><br /><pre name="code" class="coldfusion"><br /> try{<br />     rdo = document.createElement('&lt;input type="radio" name="fldID" /&gt;');<br /> }catch(err){<br />  rdo = document.createElement('input');<br /> }<br /> rdo.setAttribute('type','radio');<br /> rdo.setAttribute('name','fldID');<br /></pre><br /><br />That works in IE 7, FF 3, Opera 9, and Safari 3.1 for windows.</div>
</div>
