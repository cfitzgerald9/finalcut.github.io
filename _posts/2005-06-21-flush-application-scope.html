---
layout: post
title: "Flush the Application Scope"
date: 2005-06-21
comments: false
categories:
 - coldfusion
 - utilities
---

<div class='post'>
I was looking at the model-glue framework today (haven't done much with it yet so I won't talk about it yet) and decided I wanted to see how fast one of the same apps was with the built in model-glue debugging turned off.<br /><br />To do so I had to edit the ModelGlue.xml file - however it turns out that the xml file (as it should be) is cached in the application scope. So I was forced to do a restart of the CF service. I typically prefer not to do that (just becuase it is kind of slow on my machine).<br /><br />So, I wrote a very simple flush.cfm file that will flush the application scope. Obvioulsy, you don't want to leave this lying around but you might find it helpful if you aren't already using a similar technique:<br /><pre name="code" class="coldfusion"><br />&lt;cfloop list="#structKeyList(application)#" index="key"&gt;<br />       &lt;cfif key NEQ "applicationname"&gt;<br />&lt;cfset structdelete(application,key) /&gt;<br />       &lt;/cfif&gt;<br />&lt;/cfloop&gt;<br /></pre><br /><span style="font-weight: bold;">I had to update the prior code to check and make sure I'm not deleting the applicationname value.</span><br /><br />Obviously, nothing real groundbreaking here - but I figured it might save some people the frustration of clearing their application cache while they develop. If anyone knows of any dangers/risks in doing this please leave a comment. Oh, and this has only been tested on MX 6.1 (but I see no reason why it wouldn't work on 7).</div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
If you edit your Coldspring.xml file and then append init=true to the URL anywhere, this will flush your application scope</div>
</div>
<div class='comment'>
<div class='author'>Bill</div>
<div class='content'>
thanks for sharing your approach Mark.  I think I will stick with my "flush" just becuase <BR/>1. I don't like editing my application.cfm file (no real reason)<BR/>2. I prefer not having duplicated application scopes (from changing the application name) in memory<BR/>3. typically if I flush the scope I don't really care how often I have done it.  If I'm doing it is usually to reload a changed cfc (such as a DAO) into application scope after my model has changed in some way.<BR/><BR/>likewise with the model-glue framework I didn't really care that I was flushing all I really cared was to get rid of the model-glue debug info to see if had any effect on the overall performance of the framework.<BR/><BR/>However, I will keep your method in mind should I be working on a project where I do need that extra information!<BR/><BR/>Cheers,<BR/>Bill</div>
</div>
<div class='comment'>
<div class='author'>Anonymous</div>
<div class='content'>
Bill - during development you can set the application timeout to something small - like an hour, and then simply change the name of the application when you want to reset the scope.  I usually use a number of some kind to tell me how often I've modified the static parameters of the scope - like "myapplicationname_v1_21" (modified 21 times for example).<BR/><BR/>-Mark Kruger</div>
</div>
</div>
