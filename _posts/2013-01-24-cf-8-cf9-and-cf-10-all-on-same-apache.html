---
layout: post
title: "CF 8, CF9, and CF 10 all on the same apache server!"
date: 2013-01-24
comments: false
categories:
 - coldfusion
 - cf8
 - cf10
 - apache
 - cf9
 - cf
---

<div class='post'>
<p>Today I had the seemingly unfortunate task of adding CF10 to my webserver while continuing to keep CF 8 and CF 9 running on it. &nbsp;Before you install CF 10 first follow my <a href="http://code.rawlinson.us/2011/02/installing-cf8-and-cf9-side-by-side-on.html">prior post instructions on getting CF 8 and 9 working together with Apache</a>.<br /></p><p>Once you have that working you just have to install CF10 - I installed to c:\dev\tools\ColdFusion10. &nbsp;I told it to automatically connect to my apache server. &nbsp;Then, once it was done I had to do a couple tweaks.<br /></p><p>First off, I removed the following lines from my httpd.conf:<br /></p><p><pre class="xml" name="code">        #JRunConfig Errorurl url <optionally errors="" on="" redirect="" this="" to="" url=""><br />        #JRunConfig ProxyRetryInterval 600 <number before="" clustered="" of="" reconnect="" seconds="" server="" to="" trying="" unreachable="" wait=""><br />        #JRunConfig ConnectTimeout 15 <number a="" connect="" jrun="" of="" on="" seconds="" server="" socket="" to="" wait=""><br />        #JRunConfig RecvTimeout 300 <number a="" jrun="" of="" on="" receive="" seconds="" server="" socket="" to="" wait=""><br />        #JRunConfig SendTimeout 15 <number a="" jrun="" of="" on="" seconds="" send="" server="" socket="" to="" wait=""><br /><br /><br />        JRunConfig Apialloc false<br />        JRunConfig Serverstore "C:/dev/tools/JRun4/lib/wsconfig/cf9/jrunserver.store"<br />        JRunConfig Bootstrap 127.0.0.1:51000<br />        AddHandler jrun-handler .jsp .jws .cfm .cfml .cfc .cfr .cfswf<br /></number></number></number></number></optionally></pre></p><p>If I left those in there CF got a little confused my CF 10 stuff wouldn't work properly.  So take those out.   Also, note, to get all of this to work you pretty much have to be using Virtual Hosts.  Thus, if you had a virtual host already defined that was talking to CF 9 then you'll need to add these four lines into those virtual hosts: </p><p><pre class="xml" name="code">        JRunConfig Apialloc false<br />        JRunConfig Serverstore "C:/dev/tools/JRun4/lib/wsconfig/cf9/jrunserver.store"<br />        JRunConfig Bootstrap 127.0.0.1:51000<br />        AddHandler jrun-handler .jsp .jws .cfm .cfml .cfc .cfr .cfswf<br /></pre></p><p>Next up, create a virtual host that will be using CF 10.  You don't have to use a different port; you can still use port 80. </p><p>Here is an example virtual host that uses CF 10 and exposes the CF 10 administrator: </p><p><pre class="xml" name="code">#wcs_10<br />&lt;VirtualHost 127.0.0.1:80&gt;<br />    DocumentRoot "c:/dev/websites/cften/site/"<br />    ServerAdmin www.cften.com<br />    ServerName cften<br />    ServerAlias *.cften<br />    ErrorLog c:/dev/websites/cften/log/server.log<br />DirectoryIndex index.html index.shtml index.php default.htm default.html index.cfm<br /><br /><br />    &lt;Directory "c:/dev/websites/cften/site"&gt;<br />DirectoryIndex index.html index.shtml index.php default.htm default.html index.cfm<br />          Options ExecCGI FollowSymLinks<br />          AllowOverride all<br />          Allow from all<br />          Order allow,deny<br />    &lt;/Directory&gt;<br /><br />        Alias /mxunit /dev/tools/mxunit<br />        &lt;Directory /dev/tools/mxunit&gt;<br />        Order allow,deny<br />        Allow from all<br />        &lt;/Directory&gt;<br /><br />    # Where to find workers.properties<br />    JkMountFile "C:\dev\tools\ColdFusion10\config\wsconfig\1\uriworkermap.properties"<br />    # Select the timestamp log format<br />    JkLogStampFormat "[%a %b %d %H:%M:%S %Y] "<br />    AddHandler jakarta-servlet .cfm .cfml .cfc .cfr .cfswf<br /><br />    Alias /CFIDE "C:\dev\tools\ColdFusion10\cfusion\wwwroot\CFIDE"<br />    &lt;Directory  "C:\dev\tools\ColdFusion10\cfusion\wwwroot\CFIDE"&gt;<br />      Options Indexes FollowSymLinks<br />      AllowOverride None<br />      Order allow,deny<br />      Allow from all<br />    &lt;/Directory&gt;<br /><br />&lt;/VirtualHost&gt;<br /></pre></p><p>Finally, go to your apache/conf directory and edit the mod_jk.conf file - you're basically removing a bunch of lines so that your file ends up looking like this: </p><p><pre class="xml" name="code"># Load mod_jk module<br />LoadModule    jk_module  "C:\dev\tools\ColdFusion10\config\wsconfig\1\mod_jk.so"<br />JkWorkersFile "C:\dev\tools\ColdFusion10\config\wsconfig\1\workers.properties"<br /># Where to put jk logs<br />JkLogFile "C:\dev\tools\ColdFusion10\config\wsconfig\1\mod_jk.log"<br /># Where to put jk shared memory<br />JkShmFile "C:\dev\tools\ColdFusion10\config\wsconfig\1\jk_shm"<br /># Set the jk log level [debug/error/info]<br />JkLogLevel info<br />&lt;Files ~ ".hbmxml$"&gt;<br />Order allow,deny<br />Deny from all<br />&lt;/Files&gt;<br /></pre></p><p>Then, restart apache and boom! You'll be all set.  CF8, CF9, and CF10 all will be working along side each other.  To test it you can put a file like this in the root of your different virtual servers and hit them and see what is reported back: </p><p><pre class="coldfusion" name="code">&lt;cfdump var="#server.coldfusion.productversion#"&gt;<br /></pre></p><p>Hat tip to <a href="http://kmaiya.blogspot.in/2012/04/co-existence-of-coldfusion9-and.html">http://kmaiya.blogspot.in/2012/04/co-existence-of-coldfusion9-and.html</a>  for pointing me in the right direction for getting CF10 working. </p></div>
